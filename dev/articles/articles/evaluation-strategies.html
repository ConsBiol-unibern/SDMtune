<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Evaluation strategies • SDMtune</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="Evaluation strategies">
<meta property="og:description" content="SDMtune">
<meta property="og:image" content="https://consbiol-unibern.github.io/SDMtune/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">SDMtune</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/SDMtune.html">Get started</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/prepare-data.html">Prepare data for the analysis</a>
    </li>
    <li>
      <a href="../../articles/articles/train-model.html">Train a model</a>
    </li>
    <li>
      <a href="../../articles/articles/make-predictions.html">Make predictions</a>
    </li>
    <li>
      <a href="../../articles/articles/evaluate-model.html">Evaluate a model</a>
    </li>
    <li>
      <a href="../../articles/articles/evaluation-strategies.html">Evaluation strategies</a>
    </li>
    <li>
      <a href="../../articles/articles/variable-importance.html">Variable importance</a>
    </li>
    <li>
      <a href="../../articles/articles/variable-selection.html">Data-driven variable selection</a>
    </li>
    <li>
      <a href="../../articles/articles/tune-hyperparameters.html">Tune model hyperparameters</a>
    </li>
    <li>
      <a href="../../articles/articles/train-tune-presence-absence-models.html">Train and tune presence absence models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ConsBiol-unibern/SDMtune">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="evaluation-strategies_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Evaluation strategies</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ConsBiol-unibern/SDMtune/blob/master/vignettes/articles/evaluation-strategies.Rmd"><code>vignettes/articles/evaluation-strategies.Rmd</code></a></small>
      <div class="hidden name"><code>evaluation-strategies.Rmd</code></div>

    </div>

    
    
<div id="intro" class="section level2">
<h2 class="hasAnchor">
<a href="#intro" class="anchor"></a>Intro</h2>
<p>In the previous articles you have learned how to <a href="./prepare-data.html">prepare the data</a> for the analysis, how to <a href="./train-model.html">train a model</a>, how to <a href="./make-predictions.html">make predictions</a> and how to <a href="./evaluate-model.html">evaluate a model</a> using <strong>SDMtune</strong>. In this article you will learn different evaluation strategies to achieve a better estimate of the model performance.</p>
</div>
<div id="train-and-testing-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#train-and-testing-datasets" class="anchor"></a>Train and testing datasets</h2>
<p>First we load the <strong>SDMtune</strong> package:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">SDMtune</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt;    _____  ____   __  ___ __</span>
<span class="co">#&gt;   / ___/ / __ \ /  |/  // /_ __  __ ____   ___</span>
<span class="co">#&gt;   \__ \ / / / // /|_/ // __// / / // __ \ / _ \</span>
<span class="co">#&gt;  ___/ // /_/ // /  / // /_ / /_/ // / / //  __/</span>
<span class="co">#&gt; /____//_____//_/  /_/ \__/ \__,_//_/ /_/ \___/  version 1.1.0.9000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite this package in publications type: citation("SDMtune").</span></pre></body></html></div>
<p>It’s always a good practice to split the species locations in two parts and use one part to train the model and the remaining part to evaluate it. We can use the <code><a href="../../reference/trainValTest.html">trainValTest()</a></code> function for this purpose. Let’s say we want to use 80% of the species locations to train our model and 20% as testing dataset to evaluate it:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">zeallot</span>)  <span class="co"># For unpacking assignment</span>
<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">train</span>, <span class="no">test</span>) <span class="kw">%&lt;-%</span> <span class="fu"><a href="../../reference/trainValTest.html">trainValTest</a></span>(<span class="no">data</span>, <span class="kw">test</span> <span class="kw">=</span> <span class="fl">0.2</span>, <span class="kw">only_presence</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">seed</span> <span class="kw">=</span> <span class="fl">25</span>)
<span class="no">maxnet_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="st">"Maxnet"</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">train</span>)</pre></body></html></div>
<p>The <code>only_presence</code> argument is used to split only the presence and not the background locations. We can now evaluate the model using the testing dataset that has not been used to train the model:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="st">"Training auc: "</span>, <span class="fu"><a href="../../reference/auc.html">auc</a></span>(<span class="no">maxnet_model</span>))
<span class="co">#&gt; Training auc:  0.8752144</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="st">"Testing auc: "</span>, <span class="fu"><a href="../../reference/auc.html">auc</a></span>(<span class="no">maxnet_model</span>, <span class="kw">test</span> <span class="kw">=</span> <span class="no">test</span>))
<span class="co">#&gt; Testing auc:  0.8505888</span></pre></body></html></div>
<p>This approach is valid when we have a large dataset but in our case, with only 510 observations, the evaluation depends strongly on how we split our presence locations. Let’s run a small experiment in which we perform different train/test splits and we compute the AUC:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">output</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(<span class="fl">NA</span>, <span class="kw">nrow</span> <span class="kw">=</span> <span class="fl">10</span>, <span class="kw">ncol</span> <span class="kw">=</span> <span class="fl">3</span>)) <span class="co"># Create an empty data.frame</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">output</span>) <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"seed"</span>, <span class="st">"trainAUC"</span>, <span class="st">"testAUC"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">25</span>)
<span class="no">seeds</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample.int</a></span>(<span class="fl">1000</span>, <span class="fl">10</span>) <span class="co"># Create 10 different random seeds</span>
<span class="kw">for</span> (<span class="no">i</span> <span class="kw">in</span> <span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">seeds</span>)) { <span class="co"># Loop through the seeds</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">train</span>, <span class="no">test</span>) <span class="kw">%&lt;-%</span> <span class="fu"><a href="../../reference/trainValTest.html">trainValTest</a></span>(<span class="no">data</span>, <span class="kw">test</span> <span class="kw">=</span> <span class="fl">0.2</span>, <span class="kw">seed</span> <span class="kw">=</span> <span class="no">seeds</span>[<span class="no">i</span>], <span class="kw">only_presence</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="co"># Make the train/test split</span>
  <span class="no">m</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="st">"Maxnet"</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">train</span>) <span class="co"># train the model</span>
  <span class="co"># Populate the output data.frame</span>
  <span class="no">output</span>[<span class="no">i</span>, <span class="fl">1</span>] <span class="kw">&lt;-</span> <span class="no">seeds</span>[<span class="no">i</span>]
  <span class="no">output</span>[<span class="no">i</span>, <span class="fl">2</span>] <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/auc.html">auc</a></span>(<span class="no">m</span>)
  <span class="no">output</span>[<span class="no">i</span>, <span class="fl">3</span>] <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/auc.html">auc</a></span>(<span class="no">m</span>, <span class="kw">test</span> <span class="kw">=</span> <span class="no">test</span>)
}</pre></body></html></div>
<p>The testing AUC varies from 0.8340675 to 0.8671762. When we have to deal with a small dataset a better approach is the cross validation.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="co"># Print the output</span>
<span class="no">output</span></pre></body></html></div>
<table class="table table table-striped table-hover table-condensed">
<thead><tr>
<th style="text-align:right;">
seed
</th>
<th style="text-align:right;">
trainAUC
</th>
<th style="text-align:right;">
testAUC
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
647
</td>
<td style="text-align:right;">
0.8698272
</td>
<td style="text-align:right;">
0.8552425
</td>
</tr>
<tr>
<td style="text-align:right;">
477
</td>
<td style="text-align:right;">
0.8782434
</td>
<td style="text-align:right;">
0.8340675
</td>
</tr>
<tr>
<td style="text-align:right;">
536
</td>
<td style="text-align:right;">
0.8680666
</td>
<td style="text-align:right;">
0.8656850
</td>
</tr>
<tr>
<td style="text-align:right;">
444
</td>
<td style="text-align:right;">
0.8735606
</td>
<td style="text-align:right;">
0.8566337
</td>
</tr>
<tr>
<td style="text-align:right;">
985
</td>
<td style="text-align:right;">
0.8712828
</td>
<td style="text-align:right;">
0.8565025
</td>
</tr>
<tr>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
0.8719091
</td>
<td style="text-align:right;">
0.8519175
</td>
</tr>
<tr>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
0.8719313
</td>
<td style="text-align:right;">
0.8661387
</td>
</tr>
<tr>
<td style="text-align:right;">
617
</td>
<td style="text-align:right;">
0.8743353
</td>
<td style="text-align:right;">
0.8529850
</td>
</tr>
<tr>
<td style="text-align:right;">
282
</td>
<td style="text-align:right;">
0.8695072
</td>
<td style="text-align:right;">
0.8671275
</td>
</tr>
<tr>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
0.8709719
</td>
<td style="text-align:right;">
0.8671762
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="co"># compute the range of the testing AUC</span>
<span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span>(<span class="no">output</span>[, <span class="fl">3</span>])
<span class="co">#&gt; [1] 0.8340675 0.8671762</span></pre></body></html></div>
<div id="try-yourself" class="section level3">
<h3 class="hasAnchor">
<a href="#try-yourself" class="anchor"></a>Try yourself</h3>
<p>Repeat the same analysis using the TSS instead of the AUC.</p>
</div>
</div>
<div id="cross-validation" class="section level2">
<h2 class="hasAnchor">
<a href="#cross-validation" class="anchor"></a>Cross validation</h2>
<p>To perform a cross validation in <strong>SDMtune</strong> we have to pass the <code>fold</code> argument to the <code><a href="../../reference/train.html">train()</a></code> function. First we have to create the folds. There are several way to create them, here we explain how to make a random partition of 4 folds using the function <code><a href="../../reference/randomFolds.html">randomFolds()</a></code>:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">folds</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/randomFolds.html">randomFolds</a></span>(<span class="no">data</span>, <span class="kw">k</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">only_presence</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">seed</span> <span class="kw">=</span> <span class="fl">25</span>)</pre></body></html></div>
<p>The output of the function is a list containing two matrices, the first for the training and the second for the testing locations. Each column of one matrix represents a fold with <code>TRUE</code> for the locations included in and <code>FALSE</code> excluded from the partition.</p>
<p>Let’s perform a 4 fold cross validation using the <strong>Maxnet</strong> method:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">cv_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="st">"Maxnet"</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">data</span>, <span class="kw">folds</span> <span class="kw">=</span> <span class="no">folds</span>)
<span class="no">cv_model</span></pre></body></html></div>
<pre><code>#&gt; Object of class SDMmodelCV 
#&gt; Method: Maxnet 
#&gt; 
#&gt; Species: Virtual species 
#&gt; Replicates: 4 
#&gt; Presence locations: 400 
#&gt; Absence locations: 5000 
#&gt; 
#&gt; Model configurations:
#&gt; --------------------
#&gt; fc: lqph
#&gt; reg: 1
#&gt; 
#&gt; Variables:
#&gt; ---------
#&gt; Continuous: bio1 bio12 bio16 bio17 bio5 bio6 bio7 bio8 
#&gt; Categorical: biome</code></pre>
<p>The output in this case is an <code>SDMmodelCV()</code> object. It contains the four trained models in the <code>models</code> slot and the fold partitions in the <code>folds</code> slot. We can compute the AUC of a <code>SDMmodelCV()</code> object using:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="st">"Training AUC: "</span>, <span class="fu"><a href="../../reference/auc.html">auc</a></span>(<span class="no">cv_model</span>))
<span class="co">#&gt; Training AUC:  0.8734151</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="st">"Testing AUC: "</span>, <span class="fu"><a href="../../reference/auc.html">auc</a></span>(<span class="no">cv_model</span>, <span class="kw">test</span> <span class="kw">=</span> <span class="fl">TRUE</span>))
<span class="co">#&gt; Testing AUC:  0.8553538</span></pre></body></html></div>
<p>this returns the AUC value averaged across the four different models.</p>
<div id="try-yourself-1" class="section level3">
<h3 class="hasAnchor">
<a href="#try-yourself-1" class="anchor"></a>Try yourself</h3>
<p>Repeat the analysis using the <code>default_model</code> that we created in the <a href="./model-training.html#train-a-model-with-default-settings">train a model</a> article.</p>
</div>
<div id="spatial-cross-validation" class="section level3">
<h3 class="hasAnchor">
<a href="#spatial-cross-validation" class="anchor"></a>Spatial Cross Validation</h3>
<p>The <code><a href="../../reference/train.html">train()</a></code> function accepts folds created with other packages (ENMeval and blockCV). The function will convert internally into the correct format for <code>SDMtune</code>. These packages have specific function to create folds partitions that are spatially or environmentally independent.</p>
<p>Block partition using the ENMeval package:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ENMeval</span>)
<span class="no">block_folds</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ENMeval/man/get.evaluation.bins.html">get.block</a></span>(<span class="kw">occ</span> <span class="kw">=</span> <span class="no">data</span>@<span class="kw">coords</span>[<span class="no">data</span>@<span class="kw">pa</span> <span class="kw">==</span> <span class="fl">1</span>, ], <span class="kw">bg.coords</span> <span class="kw">=</span> <span class="no">data</span>@<span class="kw">coords</span>[<span class="no">data</span>@<span class="kw">pa</span> <span class="kw">==</span> <span class="fl">0</span>, ])
<span class="no">model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="kw">method</span> <span class="kw">=</span> <span class="st">"Maxnet"</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">data</span>, <span class="kw">fc</span> <span class="kw">=</span> <span class="st">"l"</span>, <span class="kw">reg</span> <span class="kw">=</span> <span class="fl">0.8</span>, <span class="kw">folds</span> <span class="kw">=</span> <span class="no">block_folds</span>)</pre></body></html></div>
<p>Checkerboard1 partition using the ENMeval package</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">cb_folds</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ENMeval/man/get.evaluation.bins.html">get.checkerboard1</a></span>(<span class="kw">occ</span> <span class="kw">=</span> <span class="no">data</span>@<span class="kw">coords</span>[<span class="no">data</span>@<span class="kw">pa</span> <span class="kw">==</span> <span class="fl">1</span>, ], <span class="kw">env</span> <span class="kw">=</span> <span class="no">predictors</span>, <span class="kw">bg.coords</span> <span class="kw">=</span> <span class="no">data</span>@<span class="kw">coords</span>[<span class="no">data</span>@<span class="kw">pa</span> <span class="kw">==</span> <span class="fl">0</span>, ], <span class="kw">aggregation.factor</span> <span class="kw">=</span> <span class="fl">4</span>)
<span class="no">model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="kw">method</span> <span class="kw">=</span> <span class="st">"Maxnet"</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">data</span>, <span class="kw">fc</span> <span class="kw">=</span> <span class="st">"l"</span>, <span class="kw">reg</span> <span class="kw">=</span> <span class="fl">0.8</span>, <span class="kw">folds</span> <span class="kw">=</span> <span class="no">cb_folds</span>)</pre></body></html></div>
<p>Environmental block using the blockCV package</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">blockCV</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">raster</span>)
<span class="co"># Create spatial points data frame</span>
<span class="no">sp_df</span> <span class="kw">&lt;-</span> <span class="fu">SpatialPointsDataFrame</span>(<span class="no">data</span>@<span class="kw">coords</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.data.frame.html">as.data.frame</a></span>(<span class="no">data</span>@<span class="kw">pa</span>), <span class="kw">proj4string</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/projection.html">crs</a></span>(<span class="no">predictors</span>))
<span class="no">e_folds</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/blockCV/man/envBlock.html">envBlock</a></span>(<span class="kw">rasterLayer</span> <span class="kw">=</span> <span class="no">predictors</span>, <span class="kw">speciesData</span> <span class="kw">=</span> <span class="no">sp_df</span>, <span class="kw">species</span> <span class="kw">=</span> <span class="st">"data@pa"</span>, <span class="kw">k</span> <span class="kw">=</span> <span class="fl">4</span>, <span class="kw">standardization</span> <span class="kw">=</span> <span class="st">"standard"</span>, <span class="kw">rasterBlock</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">numLimit</span> <span class="kw">=</span> <span class="fl">100</span>)
<span class="no">model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="kw">method</span> <span class="kw">=</span> <span class="st">"Maxnet"</span>, <span class="kw">data</span> <span class="kw">=</span> <span class="no">data</span>, <span class="kw">fc</span> <span class="kw">=</span> <span class="st">"l"</span>, <span class="kw">reg</span> <span class="kw">=</span> <span class="fl">0.8</span>, <span class="kw">folds</span> <span class="kw">=</span> <span class="no">e_folds</span>)</pre></body></html></div>
</div>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>In this article you have learned:</p>
<ul>
<li>how to split the presence dataset in training and testing folds;</li>
<li>how to evaluate the model using the held out testing dataset;</li>
<li>how to create random folds for cross validation;</li>
<li>how to perform a cross validation;</li>
<li>how to use other packages to create the folds for the k-fold cross validation;</li>
<li>how to evaluate an <code>SDMmodelCV()</code> object.</li>
</ul>
<p>In the <a href="./variable-importance.html">next article</a> you will learn how to display the variable importance and how to plot the response curve.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/sgvignali">Sergio Vignali</a>, <a href="http://www.cb.iee.unibe.ch/about_us/barras_arnaud_gian/index_eng.html">Arnaud Barras</a>, <a href="http://www.cb.iee.unibe.ch/about_us/dr_braunisch_veronika/index_eng.html">Veronika Braunisch</a>, <a href="http://www.cb.iee.unibe.ch/index_eng.html">Conservation Biology - University of Bern</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'f5b56329d14fa0bab34fea62e13b450d',
    indexName: 'sgvignali-sdmtune',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
