<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Species Distribution Model Selection • SDMtune</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Species Distribution Model Selection">
<meta property="og:description" content="SDMtune provides a framework that facilitates preparing data for analysis, train and evaluate models. It also includes functions for data driven variable selection and model tuning and utilities to display results (at the moment it implements MaxEnt and Maxnet models). SDMsel uses its own script to predict MaxEnt models that performs much faster for large datasets than native predictions made using Java software. This reduces considerably the computation time when tuning the model, especially when optimizing the AICc. ">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">SDMtune</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/SDMtune.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sgvignali/SDMtune">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="sdmtune" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#sdmtune" class="anchor"></a>SDMtune <img src="logo.svg" align="right" alt="" width="120">
</h1></div>
<p><strong>SDMtune</strong> provides a framework that facilitates preparing data for analysis, train and evaluate models. It also includes functions for data driven variable selection and model tuning and utilities to display results (at the moment it implements MaxEnt and Maxnet models). <strong>SDMtune</strong> uses its own script to predict MaxEnt models that performs much faster for large datasets than native predictions made using Java software. This reduces considerably the computation time when tuning the model, especially when optimizing the <strong>AICc</strong>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can get the latest stable version from CRAN:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"SDMtune"</span>)</code></pre></div>
<p>or the latest development version from github:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"sgvignali/SDMtune"</span>)</code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Load required packages:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(SDMtune)
<span class="co">#&gt; </span>
<span class="co">#&gt;    _____  ____   __  ___ __</span>
<span class="co">#&gt;   / ___/ / __ \ /  |/  // /_ __  __ ____   ___</span>
<span class="co">#&gt;   \__ \ / / / // /|_/ // __// / / // __ \ / _ \</span>
<span class="co">#&gt;  ___/ // /_/ // /  / // /_ / /_/ // / / //  __/</span>
<span class="co">#&gt; /____//_____//_/  /_/ \__/ \__,_//_/ /_/ \___/  version 0.0.0.9000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite this package in publications type: citation("SDMtune").</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dismo)</code></pre></div>
<p>Obtain the data for the analysis, we use the dataset provided by <code>dismo</code>package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">files &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(<span class="dt">path =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="dt">package =</span> <span class="st">"dismo"</span>), <span class="st">"/ex"</span>, <span class="dt">sep =</span> <span class="st">""</span>), <span class="dt">pattern =</span> <span class="st">"grd"</span>, <span class="dt">full.names =</span> T)
predictors &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/stack">stack</a></span>(files)
file &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="dt">package =</span> <span class="st">"dismo"</span>), <span class="st">"/ex/bradypus.csv"</span>, <span class="dt">sep =</span> <span class="st">""</span>)
bradypus &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/read.table">read.table</a></span>(file, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="st">","</span>)
train_coords &lt;-<span class="st"> </span>bradypus[, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">25</span>)
bg_coords &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/dismo/topics/randomPoints">randomPoints</a></span>(predictors, <span class="dv">5000</span>)  <span class="co"># Extract random points</span></code></pre></div>
<p>Prepare the data for the analysis with <code>SDMtune</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">train &lt;-<span class="st"> </span><span class="kw"><a href="reference/prepareSWD.html">prepareSWD</a></span>(<span class="dt">species =</span> <span class="st">"Bradypus variegatus"</span>, <span class="dt">coords =</span> train_coords, <span class="dt">env =</span> predictors, <span class="dt">categoricals =</span> <span class="st">"biome"</span>)
<span class="co">#&gt; Extracting predictor information for given locations...</span>
bg &lt;-<span class="st"> </span><span class="kw"><a href="reference/prepareSWD.html">prepareSWD</a></span>(<span class="dt">species =</span> <span class="st">"Bradypus variegatus"</span>, <span class="dt">coords =</span> bg_coords, <span class="dt">env =</span> predictors, <span class="dt">categoricals =</span> <span class="st">"biome"</span>)
<span class="co">#&gt; Extracting predictor information for given locations...</span>
<span class="co">#&gt; Warning: 5 locations are NA for some environmental variables, they will be discard!</span></code></pre></div>
<p>Train a MaxEnt model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">maxent_model &lt;-<span class="st"> </span><span class="kw"><a href="reference/train.html">train</a></span>(<span class="dt">method =</span> <span class="st">"Maxent"</span>, <span class="dt">presence =</span> train, <span class="dt">bg =</span> bg, <span class="dt">reg =</span> <span class="dv">1</span>, <span class="dt">fc =</span> <span class="st">"lqph"</span>)
<span class="co">#&gt; Loading required namespace: rJava</span></code></pre></div>
<p>Train a Maxnet model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">maxnet_model &lt;-<span class="st"> </span><span class="kw"><a href="reference/train.html">train</a></span>(<span class="dt">method =</span> <span class="st">"Maxnet"</span>, <span class="dt">presence =</span> train, <span class="dt">bg =</span> bg, <span class="dt">reg =</span> <span class="dv">1</span>, <span class="dt">fc =</span> <span class="st">"lqph"</span>)</code></pre></div>
<p>Plot the ROC curve:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/plotROC.html">plotROC</a></span>(maxent_model)</code></pre></div>
<p><img src="reference/figures/README-plot-ROC-curve%20maxent-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/plotROC.html">plotROC</a></span>(maxnet_model)</code></pre></div>
<p><img src="reference/figures/README-plot-ROC-curve%20maxnet-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Make prediction:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">maxent_pred &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/dismo/topics/predict">predict</a></span>(maxent_model, <span class="dt">data =</span> predictors, <span class="dt">type =</span> <span class="st">"cloglog"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">maxnet_pred &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/dismo/topics/predict">predict</a></span>(maxnet_model, <span class="dt">data =</span> predictors, <span class="dt">type =</span> <span class="st">"cloglog"</span>)</code></pre></div>
<p>Plot prediction:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/plotPred.html">plotPred</a></span>(maxent_pred, <span class="dt">lt =</span> <span class="st">"cloglog output"</span>)</code></pre></div>
<p><img src="reference/figures/README-plot-prediction%20maxent-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/plotPred.html">plotPred</a></span>(maxnet_pred, <span class="dt">lt =</span> <span class="st">"cloglog output"</span>)</code></pre></div>
<p><img src="reference/figures/README-plot-prediction%20maxnet-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="speed-test" class="section level1">
<h1 class="hasAnchor">
<a href="#speed-test" class="anchor"></a>Speed test</h1>
<p>We test now the difference in computation speed between the predict function of the <strong>dismo</strong> package that uses the Java software and the predict function of the <strong>SDMtune</strong> package. We also test if the results are equivalent.</p>
<p>The following code creates a function to test the equivalence of the results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_check &lt;-<span class="st"> </span><span class="cf">function</span>(values) {
  error &lt;-<span class="st"> </span><span class="fl">1e-7</span> 
  max_error &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Extremes">max</a></span>(<span class="kw">values</span>(values[[<span class="dv">1</span>]]) <span class="op">-</span><span class="st"> </span><span class="kw">values</span>(values[[<span class="dv">2</span>]]), <span class="dt">na.rm =</span> T) 
  max_error <span class="op">&lt;</span><span class="st"> </span>error
}</code></pre></div>
<p>If the results diverge more than <code>1e-7</code> the test will fail. The next function converts an object of class <code>Maxent</code> into an object of class <code>MaxEnt</code> (dismo pkg):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">me_model &lt;-<span class="st"> </span><span class="kw"><a href="reference/SDMmodel2MaxEnt.html">SDMmodel2MaxEnt</a></span>(maxent_model)</code></pre></div>
<p>Run the test with 10 replicates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(microbenchmark)
res &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/microbenchmark/topics/microbenchmark">microbenchmark</a></span>(<span class="st">"dismo"</span> =<span class="st"> </span>pred &lt;-<span class="st"> </span>{<span class="kw"><a href="https://www.rdocumentation.org/packages/dismo/topics/predict">predict</a></span>(me_model, predictors)},
                      <span class="st">"SDMtune"</span> =<span class="st"> </span>pred &lt;-<span class="st"> </span>{<span class="kw"><a href="https://www.rdocumentation.org/packages/dismo/topics/predict">predict</a></span>(maxent_model, predictors, <span class="dt">type =</span> <span class="st">"cloglog"</span>)},
                      <span class="dt">times =</span> <span class="dv">10</span>,
                      <span class="dt">check =</span> my_check)</code></pre></div>
<p>Print results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;     expr      min       lq     mean   median       uq      max neval</span>
<span class="co">#&gt;    dismo 234.4828 247.6949 260.0786 260.4636 270.1022 297.1218    10</span>
<span class="co">#&gt;  SDMtune 114.5320 116.6716 122.9643 122.1407 130.5729 132.5317    10</span></code></pre></div>
<p>Plot results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/boxplot">boxplot</a></span>(res)</code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-7-1.png" width="700" style="display: block; margin: auto;"></p>
<p><strong>SDMtune</strong> is at almost two times faster than the native Java software. The improvement in speed difference is even greater for large datasets when using parallel computation (i.e. see details in predict function).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/sgvignali/SDMtune">https://​github.com/​sgvignali/​SDMtune</a>
</li>
<li>Report a bug at <br><a href="https://github.com/sgvignali/SDMtune/issues">https://​github.com/​sgvignali/​SDMtune/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing SDMtune</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/sgvignali">Sergio Vignali</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/00000-0002-3390-5442" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>
<a href="http://www.cb.iee.unibe.ch/about_us/barras_arnaud_gian/index_eng.html">Arnaud Barras</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-0850-6965" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>
<a href="http://www.cb.iee.unibe.ch/about_us/dr_braunisch_veronika/index_eng.html">Veronika Braunisch</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/00000-0001-7035-4662" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>
<a href="http://www.cb.iee.unibe.ch/index_eng.html">Conservation Biology - University of Bern</a> <br><small class="roles"> Funder </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/sgvignali">Sergio Vignali</a>, <a href="http://www.cb.iee.unibe.ch/about_us/barras_arnaud_gian/index_eng.html">Arnaud Barras</a>, <a href="http://www.cb.iee.unibe.ch/about_us/dr_braunisch_veronika/index_eng.html">Veronika Braunisch</a>, <a href="http://www.cb.iee.unibe.ch/index_eng.html">Conservation Biology - University of Bern</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
