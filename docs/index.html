<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Species Distribution Model Selection • SDMsel</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Species Distribution Model Selection">
<meta property="og:description" content="Provides a framework that facilitates user in preparing data for analysis, train and evaluate models. It also implements functions for data driven variable selection and model tuning and includes some utilities to display results (at the moment it implements only MaxEnt models). SDMsel uses its own script to predict MaxEnt models that results to be much faster for large datasets than native prediction made using Java software. This reduce considerably the computation time when tuninig the model using the AICc.">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">SDMsel</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/SDMsel.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/articles/tune_auc.html">Tune model using AUC</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sgvignali/SDMsel">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="sdmsel" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#sdmsel" class="anchor"></a>SDMsel <img src="reference/figures/logo.png" align="right">
</h1></div>
<p><strong>SDMsel</strong> (Species Distribution Model selection) provides a framework that facilitates users in preparing data for analysis, train and evaluate models. It also implements functions for data driven variable selection and model tuning and includes some utilities to display results (at the moment it implements MaxEnt and Maxnet models). <strong>SDMsel</strong> uses its own script to predict MaxEnt models that results to be much faster for large datasets than native prediction made using Java software. This reduce considerably the computation time when tuninig the model using the <strong>AICc</strong>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can get the latest stable version from CRAN:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"SDMsel"</span>)</code></pre></div>
<p>or latest development version from github:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"sgvignali/SDMsel"</span>)</code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Load required packages:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(SDMsel)
<span class="co">#&gt; Loading required package: ggplot2</span>
<span class="co">#&gt;  ________________________________________</span>
<span class="co">#&gt; |   ____   ____   __  __             _   |</span>
<span class="co">#&gt; |  / ___| |  _ \ |  \/  | ___   ___ | |  |</span>
<span class="co">#&gt; |  \___ \ | | | || |\/| |/ __| / _ \| |  |</span>
<span class="co">#&gt; |   ___) || |_| || |  | |\__ \|  __/| |  |</span>
<span class="co">#&gt; |  |____/ |____/ |_|  |_||___/ \___||_|  |</span>
<span class="co">#&gt; |________________________________________|</span>
<span class="co">#&gt; </span>
<span class="kw">library</span>(dismo)
<span class="co">#&gt; Loading required package: raster</span>
<span class="co">#&gt; Loading required package: sp</span></code></pre></div>
<p>Obtain data for analysis, we use the dataset provided by <code>dismo</code>package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">files &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="dt">path =</span> <span class="kw">paste</span>(<span class="kw">system.file</span>(<span class="dt">package =</span> <span class="st">"dismo"</span>), <span class="st">"/ex"</span>, <span class="dt">sep =</span> <span class="st">""</span>), <span class="dt">pattern =</span> <span class="st">"grd"</span>, <span class="dt">full.names =</span> T)
predictors &lt;-<span class="st"> </span><span class="kw">stack</span>(files)
file &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="kw">system.file</span>(<span class="dt">package =</span> <span class="st">"dismo"</span>), <span class="st">"/ex/bradypus.csv"</span>, <span class="dt">sep =</span> <span class="st">""</span>)
bradypus &lt;-<span class="st"> </span><span class="kw">read.table</span>(file, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="st">","</span>)
train_coords &lt;-<span class="st"> </span>bradypus[, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]
<span class="kw">set.seed</span>(<span class="dv">25</span>)
bg_coords &lt;-<span class="st"> </span><span class="kw">randomPoints</span>(predictors, <span class="dv">5000</span>)  <span class="co"># Extract random points</span></code></pre></div>
<p>Prepare the data for the analisys with <code>SDMsel</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">train &lt;-<span class="st"> </span><span class="kw"><a href="reference/prepareSWD.html">prepareSWD</a></span>(<span class="dt">species =</span> <span class="st">"Bradipus variagatus"</span>, <span class="dt">coords =</span> train_coords, <span class="dt">env =</span> predictors, <span class="dt">categoricals =</span> <span class="st">"biome"</span>)
<span class="co">#&gt; Extracting environmental condition for Bradipus variagatus...</span>
bg &lt;-<span class="st"> </span><span class="kw"><a href="reference/prepareSWD.html">prepareSWD</a></span>(<span class="dt">species =</span> <span class="st">"Bradipus variagatus"</span>, <span class="dt">coords =</span> bg_coords, <span class="dt">env =</span> predictors, <span class="dt">categoricals =</span> <span class="st">"biome"</span>)
<span class="co">#&gt; Extracting environmental condition for Bradipus variagatus...</span>
<span class="co">#&gt; Warning: 5 locations are NA for some environmental variables, they will be discard!</span></code></pre></div>
<p>Train a MaxEnt model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">maxent_model &lt;-<span class="st"> </span><span class="kw"><a href="reference/train.html">train</a></span>(<span class="dt">method =</span> <span class="st">"Maxent"</span>, <span class="dt">presence =</span> train, <span class="dt">bg =</span> bg, <span class="dt">rm =</span> <span class="dv">1</span>, <span class="dt">fc =</span> <span class="st">"lqph"</span>)
<span class="co">#&gt; Loading required namespace: rJava</span></code></pre></div>
<p>Train a Maxnet model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">maxnet_model &lt;-<span class="st"> </span><span class="kw"><a href="reference/train.html">train</a></span>(<span class="dt">method =</span> <span class="st">"Maxnet"</span>, <span class="dt">presence =</span> train, <span class="dt">bg =</span> bg, <span class="dt">rm =</span> <span class="dv">1</span>, <span class="dt">fc =</span> <span class="st">"lqph"</span>)</code></pre></div>
<p>Plot ROC curve:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/plotROC.html">plotROC</a></span>(maxent_model)</code></pre></div>
<p><img src="reference/figures/README-plot-ROC-curve%20maxent-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/plotROC.html">plotROC</a></span>(maxnet_model)</code></pre></div>
<p><img src="reference/figures/README-plot-ROC-curve%20maxnet-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Make prediction:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">maxent_pred &lt;-<span class="st"> </span><span class="kw">predict</span>(maxent_model, <span class="dt">data =</span> predictors, <span class="dt">type =</span> <span class="st">"cloglog"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">maxnet_pred &lt;-<span class="st"> </span><span class="kw">predict</span>(maxnet_model, <span class="dt">data =</span> predictors, <span class="dt">type =</span> <span class="st">"cloglog"</span>)</code></pre></div>
<p>Plot prediction:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/plotPred.html">plotPred</a></span>(maxent_pred, <span class="dt">lt =</span> <span class="st">"cloglog output"</span>)</code></pre></div>
<p><img src="reference/figures/README-plot-prediction%20maxent-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/plotPred.html">plotPred</a></span>(maxnet_pred, <span class="dt">lt =</span> <span class="st">"cloglog output"</span>)</code></pre></div>
<p><img src="reference/figures/README-plot-prediction%20maxnet-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="speed-test" class="section level1">
<h1 class="hasAnchor">
<a href="#speed-test" class="anchor"></a>Speed test</h1>
<p>We test now the difference in speed between the predict function of <strong>dismo</strong> package that uses the Java software and the predict function of <strong>SDMsel</strong> package. We also test if the results are equivalent.</p>
<p>The following code creates a function to test the equivalence of the results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_check &lt;-<span class="st"> </span><span class="cf">function</span>(values) {
  error &lt;-<span class="st"> </span><span class="fl">1e-7</span> 
  max_error &lt;-<span class="st"> </span><span class="kw">max</span>(<span class="kw">values</span>(values[[<span class="dv">1</span>]]) <span class="op">-</span><span class="st"> </span><span class="kw">values</span>(values[[<span class="dv">2</span>]]), <span class="dt">na.rm =</span> T) 
  max_error <span class="op">&lt;</span><span class="st"> </span>error
}</code></pre></div>
<p>If the results are different for more than <code>1e-7</code> the test will fail. The next function converts an object of class <code>Maxent</code> into an object of class <code>MaxEnt</code> (dismo pkg):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">me_model &lt;-<span class="st"> </span><span class="kw"><a href="reference/SDMmodel2MaxEnt.html">SDMmodel2MaxEnt</a></span>(maxent_model)</code></pre></div>
<p>Run the test with 10 replicates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(microbenchmark)
res &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(<span class="st">"dismo"</span> =<span class="st"> </span>pred &lt;-<span class="st"> </span>{<span class="kw">predict</span>(me_model, predictors)},
                      <span class="st">"SDMsel"</span> =<span class="st"> </span>pred &lt;-<span class="st"> </span>{<span class="kw">predict</span>(maxent_model, predictors, <span class="dt">type =</span> <span class="st">"cloglog"</span>)},
                      <span class="dt">times =</span> <span class="dv">10</span>,
                      <span class="dt">check =</span> my_check)</code></pre></div>
<p>Print results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res
<span class="co">#&gt; Unit: milliseconds</span>
<span class="co">#&gt;    expr      min       lq     mean   median       uq      max neval</span>
<span class="co">#&gt;   dismo 751.2590 756.6702 773.5538 776.8779 786.3941 794.7686    10</span>
<span class="co">#&gt;  SDMsel 263.7109 266.9099 269.8791 268.6959 273.3701 280.3493    10</span></code></pre></div>
<p>Plot results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">autoplot</span>(res)
<span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="700" style="display: block; margin: auto;"></p>
<p><strong>SDMsel</strong> is at almost three times faster than native Java software and the speed improves much more for large datasets when using parallel computation (i.e. see details in predict function).</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/sgvignali/SDMsel">https://​github.com/​sgvignali/​SDMsel</a>
</li>
<li>Report a bug at <br><a href="https://github.com/sgvignali/SDMsel/issues">https://​github.com/​sgvignali/​SDMsel/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing SDMsel</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/sgvignali">Sergio Vignali</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/00000-0002-3390-5442" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li>
<a href="http://www.cb.iee.unibe.ch/about_us/barras_arnaud_gian/index_eng.html">Arnaud Barras</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="http://www.cb.iee.unibe.ch/about_us/dr_braunisch_veronika/index_eng.html">Veronika Braunisch</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/00000-0001-7035-4662" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li>
<a href="http://www.cb.iee.unibe.ch/index_eng.html">Conservation Biology</a> <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/sgvignali">Sergio Vignali</a>, <a href="http://www.cb.iee.unibe.ch/about_us/barras_arnaud_gian/index_eng.html">Arnaud Barras</a>, <a href="http://www.cb.iee.unibe.ch/about_us/dr_braunisch_veronika/index_eng.html">Veronika Braunisch</a>, <a href="http://www.cb.iee.unibe.ch/index_eng.html">Conservation Biology</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
